@await Html.PartialAsync("_Header2")

@model WASender.Models.User
@{
    ViewData["Title"] = "Register with " + ViewBag.PlanTitle;
}

<main>
    <!-- ✅ Breadcrumb Section -->
    <div class="breadcrumb__area breadcrumb-height p-relative grey-bg"
         style="background-image: url('/assets/frontend/img/breadcrumb/breadcrumb.jpg');">
        <div class="breadcrumb__scroll-bottom smooth">
            <a href="#login">
                <i class="far fa-arrow-down"></i>
            </a>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="breadcrumb__content">
                        <h3 class="breadcrumb__title">Register with @ViewBag.PlanTitle</h3>
                        <div class="breadcrumb__list">
                            <span><a href="@Url.Action("Index", "Home")">Home</a></span>
                            <span class="dvdr"><i class="fa fa-angle-right"></i></span>
                            <span>Let's work together</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ✅ Registration Form -->
    <div class="tp-login-area">
        <div class="container-fluid p-0">
            <div class="row gx-0 align-items-center">
                <!-- ✅ Image Section -->
                <div class="col-xl-6 col-lg-6 col-12">
                    <div class="tp-login-thumb login-space sky-bg d-flex justify-content-center">
                        <img src="/assets/frontend/img/contact/login.jpg" alt="Login Image">
                    </div>
                </div>

                <!-- ✅ Form Section -->
                <div class="col-xl-6 col-lg-6 col-12">
                    <div class="tp-login-wrapper login-space d-flex justify-content-center">
                        <div id="login" class="tplogin">
                            <div class="tplogin__title">
                                <h3 class="tp-login-title">Register your Account</h3>
                            </div>

                            <!-- ✅ Success Message -->
                            @if (TempData["SuccessMessage"] != null)
                            {
                                <div class="alert alert-success">
                                    @TempData["SuccessMessage"]
                                </div>
                            }

                            <!-- ❌ Error Message -->
                            @if (TempData["ErrorMessage"] != null)
                            {
                                <div class="alert alert-danger">
                                    @TempData["ErrorMessage"]
                                </div>
                            }

                            <!-- ✅ Form -->
                            <div class="tplogin__form">
                                <form asp-action="RegisterPlan" asp-controller="Register" method="post">
                                    @Html.AntiForgeryToken()

                                    <!-- ✅ Hidden PlanId -->
                                    <input type="hidden" asp-for="PlanId" value="@ViewBag.PlanId" />

                                    <!-- ✅ Name -->
                                    <div class="tp-mail">
                                        <label for="name">Your Name</label>
                                        <input id="name" type="text" class="form-control" asp-for="Name" required autofocus>
                                        <span asp-validation-for="Name" class="text-danger"></span>
                                    </div>

                                    <!-- ✅ Email -->
                                    <div class="tp-mail">
                                        <label for="email">Email Address</label>
                                        <input id="email" type="email" class="form-control" asp-for="Email" required>
                                        <span asp-validation-for="Email" class="text-danger"></span>
                                    </div>

                                    <!-- ✅ Password -->
                                    <div class="tp-password">
                                        <label for="password">Password</label>
                                        <input id="password" type="password" class="form-control" asp-for="Password" required>
                                        <span asp-validation-for="Password" class="text-danger"></span>
                                    </div>

                                    <!-- ✅ Submit Button -->
                                    <div class="tp-login-button">
                                        <button class="tp-btn-blue-square w-100" type="submit">
                                            <span>Sign Up</span>
                                        </button>
                                    </div>

                                    <!-- ✅ Link to Login -->
                                    <div class="tp-signup d-flex justify-content-between">
                                        <div class="account">
                                            <a href="@Url.Action("Index", "Login")">Have an account?</a>
                                        </div>
                                        <div class="signin">
                                            <a href="@Url.Action("Index", "Login")">Sign in now</a>
                                        </div>
                                    </div>
                                </form>
                            </div> <!-- Form End -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- ✅ Client-side Validation -->
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}