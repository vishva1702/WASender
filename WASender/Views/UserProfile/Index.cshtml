@model WASender.Models.User
@{
    Layout = "~/Views/Shared/_UserLayout.cshtml";

    // Set Header Section Data
    ViewData["Title"] = "Edit Profile";
    ViewData["Buttons"] = new List<dynamic>
    {
        new { name = "Back to Dashboard", url = Url.Action("Index", "UserHome"), is_button = false, components = "" }
    };
}

@await Html.PartialAsync("_HeaderSection")

<div class="clearfix"></div> <!-- Add this line -->
<!-- General Settings -->
@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">
        @TempData["Error"]
    </div>
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success">
        @TempData["Success"]
    </div>
}

<div class="row">
    <div class="col-lg-5 mt-5">
        <strong>General Settings</strong>
        <p>Edit your basic credentials</p>
    </div>
    <div class="col-lg-7 mt-5">
        <form class="ajaxform" method="post" enctype="multipart/form-data" asp-action="Update" asp-controller="UserProfile">
            <input type="hidden" name="type" value="general" />
            <div class="card">
                <div class="card-body">
                    <div class="from-group row">
                        <label class="col-lg-12">Name</label>
                        <div class="col-lg-12">
                            <input type="text" name="name" class="form-control" value="@Model.Name" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">Email</label>
                        <div class="col-lg-12">
                            <input type="email" name="email" class="form-control" value="@Model.Email" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">Phone</label>
                        <div class="col-lg-12">
                            <input type="text" name="phone" class="form-control" value="@Model.Phone" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">Address (will be used for invoice)</label>
                        <div class="col-lg-12">
                            <input type="text" name="address" class="form-control" value="@Model.Address" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">Avatar</label>
                        <div class="col-lg-12">
                            <input type="file" name="avatar" class="form-control" accept="image/*" />
                        </div>
                    </div>
                    <div class="from-group row mt-3">
                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-neutral submit-button btn-sm float-left">Update Settings</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Password Update -->
<div class="row">
    <div class="col-lg-5">
        <strong>Password</strong>
        <p>Change Your Password</p>
    </div>
    <div class="col-lg-7">
        <form class="ajaxform_reset_form" method="post" asp-action="Update" asp-controller="UserProfile">
            <input type="hidden" name="type" value="password" />
            <div class="card">
                <div class="card-body">
                    <div class="from-group row">
                        <label class="col-lg-12">Old Password</label>
                        <div class="col-lg-12">
                            <input type="password" name="oldpassword" class="form-control" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">New Password</label>
                        <div class="col-lg-12">
                            <input type="password" name="password" class="form-control" required />
                        </div>
                    </div>
                    <div class="from-group row mt-2">
                        <label class="col-lg-12">Confirm Password</label>
                        <div class="col-lg-12">
                            <input type="password" name="password_confirmation" class="form-control" required />
                        </div>
                    </div>
                    <div class="from-group row mt-3">
                        <div class="col-lg-12">
                            <button type="submit" class="btn btn-neutral submit-button btn-sm float-left">Update Password</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>